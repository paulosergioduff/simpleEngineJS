/* global jQuery, cbScripts, cookie, 5.2 */
!function(e){"use strict"
var t=e("body"),s=e(window),a=e(document),i=s.width(),c=s.height()+1,l=e("#cb-container"),r=e("#cb-content"),o=e("#cb-nav-bar"),n=e("#main"),d=!1,b=e("#cb-overlay"),f=l.find(".cb-sticky-sidebar"),h=f.find(".cb-sidebar"),u=h.css("padding-top"),m,p=0,g=0,v=0,C=0,w=e("#cb-blog-infinite-scroll"),x=!1,y=e("#cb-footer"),k,S=!1,T=!0,I=e(".cb-slider-b"),D,H,N=o.find(" > div"),O=N.find(" > ul li").first(),P=e("#cb-s-trigger"),Y=e("#cb-s-trigger-sm"),j=e("#cb-lwa"),M=e("#cb-lwa-trigger"),_=e("#cb-lwa-trigger-sm"),z=e(".cb-lwa-r-trigger"),F=j.find(".lwa-form"),U=F.find(".cb-form-input-username"),E=!1,A=e(".cb-close-m").add(b),L=e("#cb-search-modal"),Q=L.find("input"),V=e("#cb-icons-wrap"),W=e("#cb-review-container"),B=W.find(".cb-overlay span"),G=W.find(".cb-overlay-stars span"),X,q,R=e("#cb-top-menu"),J=R.find(".cb-top-menu-wrap"),K=e("#cb-vote"),Z=e("#cb-full-background-featured"),$=Z.attr("data-cb-bs-fis"),ee=Z.attr("data-cb-ss-fis"),te=e("#cb-parallax-featured"),se=e("#cb-full-width-featured-img"),ae=se.attr("data-cb-bs-fis"),ie=t.attr("data-cb-bg"),ce=e("#cb-cat-header"),le=ce.attr("data-cb-bg"),re=te.find(".cb-image"),oe=e("#cb-parallax-bg"),ne=e("#cb-mob-open"),de=e("#cb-mob-close"),be,fe=e(".flexslider-1-fw"),he=e(".flexslider-1"),ue=e("#cb-to-top"),me,pe=!1,ge=e("#cb-nav-logo"),A=e(".cb-close-m").add(b),ve=!1,Ce=!1;(t.hasClass("cb-body-tabl")||t.hasClass("cb-body-mob"))&&(ve=!0),t.hasClass("cb-body-mob")&&(Ce=!0),t.hasClass("rtl")&&(E=!0),void 0!==ae&&se.backstretch(ae,{speed:350}),void 0!==$&&(e.backstretch($,{speed:350}),ve===!1&&e(".backstretch").css("position","absolute")),void 0!==ie&&(t.backstretch(ie,{fade:750}),t.removeAttr("data-cb-bg")),void 0!==le&&ce.backstretch(le,{fade:750}),void 0!==ee&&(e.backstretch(ee.split(","),{fade:750,duration:5e3}),ve===!1&&e(".backstretch").css("position","absolute")),o.length&&(i>767&&(H=N.outerHeight()),o.css("height",H),V.add(ge).css("height",O.outerHeight())),t.hasClass("admin-bar")&&(d=!0),I.each(function(){var t=e(this)
t.hasClass("cb-module-fw")||t.hasClass("cb-full-slider")?t.find(".slides > li").css("height",t.width()/2.3076923):t.hasClass("cb-slider-widget")?t.find(".slides > li").css("height",t.width()/1.6):t.find(".slides > li").css("height",t.width()/1.876923)}),ne.click(function(e){e.preventDefault(),t.addClass("cb-mob-op")}),de.click(function(e){e.preventDefault(),t.removeClass("cb-mob-op")}),M.click(function(e){e.preventDefault(),t.addClass("cb-lwa-modal-on"),ve===!1&&U.focus()}),z.click(function(e){e.preventDefault(),t.addClass("cb-lwa-r-modal-on")}),_.click(function(e){e.preventDefault(),t.addClass("cb-lwa-modal-on"),ve===!1&&U.focus()}),A.click(function(){t.removeClass("cb-lwa-modal-on cb-lwa-r-modal-on cb-s-modal-on cb-m-modal-on cb-m-em-modal-on"),Ze()}),a.keyup(function(e){27==e.keyCode&&(t.removeClass("cb-lwa-modal-on cb-lwa-r-modal-on cb-s-modal-on cb-m-modal-on cb-m-em-modal-on"),Ze())}),P.click(function(e){e.preventDefault(),t.addClass("cb-s-modal-on"),ve===!1&&Q.focus()}),Y.click(function(e){e.preventDefault(),t.addClass("cb-s-modal-on"),ve===!1&&Q.focus()})
function we(){m=d===!0?i>781?s.scrollTop()+32:s.scrollTop()+46:s.scrollTop(),xe()}function xe(){x||(requestAnimationFrame(ke),x=!0)}function ye(){S===!1&&(ke(),ke(),S=!0)}function ke(){if(t.hasClass("cb-sticky-mm")&&(t.hasClass("cb-sticky-menu-up")?(m>=X&&p>m?t.addClass("cb-stuck"):t.removeClass("cb-stuck"),m>=X+H+80?t.addClass("cb-stuck-hid"):t.removeClass("cb-stuck-hid"),p=m):m>=X?t.addClass("cb-stuck"):t.removeClass("cb-stuck")),i>767&&ve===!1&&f.length){var s=f.offset().top,a=h.outerHeight(!0),l=y.offset().top,r=s+a,o=c+m,b=e("#cb-outer-container").css("margin-top"),g=0
d===!0&&(o-=32),"0px"!=b&&(g=parseFloat(b)),h.hasClass("cb-sidebar-hp")&&(s-=60),pe===!1&&(k=a,pe=!0),a>k&&(k=a,r=s+a,v=r),k>c?(f.css("height",k),t.removeClass("cb-stuck-sb-t"),t.hasClass("cb-stuck-sb")?(!y.visible(!0)&&l>m?(t.removeClass("cb-footer-vis"),h.css("top","auto")):(t.addClass("cb-footer-vis"),h.css("top",l-k-g+"px")),v>o&&t.removeClass("cb-stuck-sb")):(o>r&&l>m&&m>s&&(t.addClass("cb-stuck-sb"),v=r),o>l&&t.addClass("cb-footer-vis"))):(d===!0?(D=H+32,C=s-parseInt(u,10)-H+32):(D=H,C=s-parseInt(u,10)-H),f.css("height",k),t.hasClass("cb-stuck-sb")?(l>o-(c-k)?(t.removeClass("cb-footer-vis"),t.hasClass("cb-stuck")?h.css("top",D):h.css("top","0")):(t.addClass("cb-footer-vis"),h.css("top",l-k+"px")),C>m&&(t.removeClass("cb-stuck-sb cb-stuck-sb-t"),t.hasClass("cb-stuck")?h.css("top",D):h.css("top","0"))):(t.hasClass("cb-stuck")&&!t.hasClass("cb-fis-big-block")&&h.css("top",D),m>=C&&(t.addClass("cb-stuck-sb cb-stuck-sb-t"),t.hasClass("cb-fis-big-block")&&h.css("top",D))))}if(t.hasClass("cb-m-sticky")&&768>i){var S=R.offset().top
m-e("#wpadminbar").outerHeight(!0)>S?t.addClass("cb-tm-stuck"):t.removeClass("cb-tm-stuck")}if(0!==re.length&&ve===!1)if(c>m){t.removeClass("cb-par-hidden"),d===!0&&(m-=32)
var I=m/2,N=I+"px"
e("#cb-par-wrap img").css({"-webkit-transform":"translate3d(0, "+N+", 0)",transform:"translate3d(0, "+N+", 0)"})}else t.addClass("cb-par-hidden")
if(w.length&&T===!0){var O=e("#main").children().last(),P=e("#main").children().first().hasClass("cb-category-top"),Y=O.attr("id"),j=O.prev()
if("cb-blog-infinite-scroll"===Y&&j.visible(!0)){T=!1
var M=e("#cb-blog-infinite-scroll").find("a").attr("href")
n.addClass("cb-loading"),e.get(M,function(t){var s,a
P===!0?(a=e(t).filter("#cb-outer-container").find("#main"),e(a).find(".cb-category-top").remove(),s=a.html()):s=e(t).filter("#cb-outer-container").find("#main").html(),e("#main").children().last().remove(),e("#main").append(s),n.removeClass("cb-loading")})}}m>750&&i>768?t.addClass("cb-to-top-vis"):t.removeClass("cb-to-top-vis"),x=!1}if(window.addEventListener?window.addEventListener("scroll",we,!1):window.attachEvent("scroll",we),e.each(B,function(t,s){var a=e(s)
a.visible(!0)&&(a.removeClass("cb-zero-trigger"),a.addClass("cb-bar-ani"))}),e.each(G,function(t,s){var a=e(s)
a.visible(!0)&&(a.removeClass("cb-zero-stars-trigger"),a.addClass("cb-bar-ani-stars"))}),s.scroll(function(t){e.each(B,function(t,s){var a=e(s)
a.visible(!0)&&a.hasClass("cb-zero-trigger")&&(a.removeClass("cb-zero-trigger"),a.addClass("cb-bar-ani"))}),e.each(G,function(t,s){var a=e(s)
a.visible(!0)&&a.hasClass("cb-zero-stars-trigger")&&(a.removeClass("cb-zero-stars-trigger"),a.addClass("cb-bar-ani-stars"))})}),jQuery(document).ready(function(e){t.hasClass("admin-bar")&&!e("#wpadminbar").length&&(d=!1,t.addClass("cb-no-admin-bar")),o.length&&i>767&&(X=o.offset().top),e(".hentry").find("a").has("img").each(function(){var t=e("img",this).attr("title"),s=e(this).attr("href"),a=e(this).attr("rel")
if(void 0!==t&&e(this).attr("title",t),void 0!==s&&"prettyPhoto[product-gallery]"!==a){var i=s.split("."),c=e(i)[e(i).length-1];("jpg"===c||"jpeg"===c||"png"===c||"gif"===c||"tif"===c)&&e(this).addClass("cb-lightbox")}}),e(".tiled-gallery").find("a").attr("rel","tiledGallery"),e(".gallery").find("a").attr("rel","tiledGallery")
var s=e("#main"),c=s.find("iframe")
c.each(function(){var t=e(this).attr("src")
t&&(t.indexOf("yout")>-1||t.indexOf("vimeo")>-1||t.indexOf("daily")>-1)&&e(this).wrap('<div class="cb-video-frame"></div>')}),e.prototype.boxer&&e(".cb-lightbox").boxer({duration:350,fixed:!0}),e(".cb-toggler").find(".cb-toggle").click(function(t){e(this).next().stop().slideToggle(),e(this).prev().stop().toggle(),e(this).prev().prev().stop().toggle(),t.preventDefault()})
var l=r.first(".cb-grid-block")
e(l).imagesLoaded(function(){t.addClass("cb-imgs-loaded")}),e(window).load(function(){o.length&&(o.css("height",""),V.css("height",""),i>767&&(H=N.outerHeight()),o.css("height",H),V.add(ge).css("height",O.outerHeight())),ye()
var t=e(".tabbernav"),s=t.children().length
4===s&&t.addClass("cb-fourtabs"),3===s&&t.addClass("cb-threetabs"),2===s&&t.addClass("cb-twotabs"),1===s&&t.addClass("cb-onetab")}),e(".cb-module-half:odd").each(function(){e(this).prev().addBack().wrapAll(e("<div/>",{"class":"cb-double-block clearfix"}))}),he.flexslider({animation:"slide",itemWidth:280,itemMargin:3,pauseOnHover:!0,maxItems:3,minItems:1,controlNav:!1,slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),fe.flexslider({animation:"slide",itemWidth:280,itemMargin:3,pauseOnHover:!0,maxItems:4,minItems:1,controlNav:!1,slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e("#cb-carousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,directionlNav:!0,itemWidth:150,itemMargin:15,asNavFor:"#cb-gallery",nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e("#cb-gallery").flexslider({animation:"slide",controlNav:!1,directionlNav:!1,animationLoop:!1,slideshow:!1,sync:"#cb-carousel",nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e(".flexslider-1-menu").flexslider({animation:"slide",itemWidth:210,itemMargin:3,slideshow:!1,pauseOnHover:!0,maxItems:2,minItems:1,controlNav:!1,nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e(".flexslider-2").flexslider({animation:"slide",minItems:1,pauseOnHover:!0,maxItems:1,controlNav:!1,slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e(".flexslider-2-fw").flexslider({animation:"slide",pauseOnHover:!0,minItems:1,maxItems:1,controlNav:!1,slideshow:cbScripts.cbSlider[1],slideshowSpeed:cbScripts.cbSlider[2],animationSpeed:cbScripts.cbSlider[0],nextText:'<i class="fa fa-angle-right"></i>',prevText:'<i class="fa fa-angle-left"></i>'}),e("#messages_search").removeAttr("placeholder")
var n=e(".main-nav li")
e(".main-nav > li").hoverIntent(function(){e(this).find(".cb-big-menu").stop().slideDown("fast"),e(this).find(".cb-mega-menu").stop().slideDown("fast"),e(this).find(".cb-links-menu .cb-sub-menu").stop().fadeIn()},function(){e(this).find(".cb-big-menu").slideUp("fast"),e(this).find(".cb-mega-menu").slideUp("fast"),e(this).find(".cb-links-menu .cb-sub-menu").fadeOut()}),n.find(".cb-big-menu .cb-sub-menu li").hoverIntent(function(){e(this).find("> .cb-grandchild-menu").stop().slideDown("fast")},function(){e(this).find("> .cb-grandchild-menu").slideUp("fast")}),n.find(".cb-links-menu .cb-sub-menu li").hoverIntent(function(){e(this).children(".cb-grandchild-menu").stop().fadeIn()},function(){e(this).children(".cb-grandchild-menu").fadeOut()})
var b=e(".cb-accordion > span").hide()
e(".cb-accordion > a").click(function(){return"none"==e(this).next().css("display")?(b.slideUp("fast"),e(this).next().slideDown("fast")):e(this).next().slideUp("fast"),!1}),ue.click(function(t){e("html, body").animate({scrollTop:0},600),t.preventDefault()}),e(".cb-video-frame").fitVids(),e(".cb-tabs").tabs(),e("#cb-ticker").totemticker({row_height:"33px",mousestop:!0}),e(".cb-tip-bot").tipper({direction:"bottom"}),e(".cb-tip-top").tipper({direction:"top"}),e(".cb-tip-right").tipper({direction:"right"}),e(".cb-tip-left").tipper({direction:"left"}),a.ajaxStop(function(){T=!0,e(".cb-pro-load").removeClass("cb-pro-load")}),r.on("click","#cb-blog-infinite-load a",function(t){t.preventDefault()
var a=e(this).attr("href"),i=e(this).parent()
s.addClass("cb-loading"),e.get(a,function(t){var a,c,l=e("#main").children().first().hasClass("cb-category-top")
l===!0?(c=e(t).filter("#cb-outer-container").find("#main"),e(c).find(".cb-category-top").remove(),a=c.html()):a=e(t).filter("#cb-outer-container").find("#main").html(),e("#main").append(a),s.removeClass("cb-loading"),i.addClass("cb-hidden")})}),e(".cb-c-l").hoverIntent(function(){var t=e(this),s=e(this).text(),a=t.closest("div")
if(a.hasClass("cb-big-menu")){var i=t.attr("data-cb-c"),c=t.attr("href"),l=e(a[0].firstChild),r=l.find(".cb-recent > ul")
e.ajax({type:"GET",data:{action:"cb_mm_a",cid:i,acall:1},url:cbScripts.cbUrl,beforeSend:function(){l.addClass("cb-pro-load")},success:function(t){r.html(e(t))},error:function(e,t,s){console.log("cbmm "+e+" :: "+t+" :: "+s)}})}},function(){})}),re.length>0&&ve===!1){var Se=te.offset().top
be=c-Se-90,oe.css("height",c),te.css("height",be)}Z.length>0&&(be=Ce===!0?c-Z.offset().top:c-Z.offset().top-80,Z.css("height",be))
var Te=e("#cb-full-background-featured"),Ie=!0,De=!0
0===Te.length&&(Te=e("#cb-full-width-featured"),Ie=!1),0===Te.length&&(Te=e("#cb-parallax-featured"),Ie=!0)
var He=Te.find(".cb-title-fi"),Ne=He.height()
t.hasClass("cb-fis-tl-overlay")&&(Ne=0)
var Oe=e("#cb-media-overlay"),Pe=e("#cb-m-trigger"),Ye=Oe.find('iframe[src^="//player.vimeo"]'),je=jQuery("#cbplayer"),Me=e("#cb-fis-wrap")
Pe.click(function(e){e.preventDefault(),Pe.hasClass("cb-lb")?t.addClass("cb-m-modal-on"):t.addClass("cb-m-em-modal-on"),Ke()})
var _e=Me.width(),ze=.9*(be-Ne),Fe=(be-ze-Ne)/2,Ue=560*ze/315,Ee
if(Ue>_e?(Ue=_e-20,Ee=10):Ee=(_e-Ue)/2,De===!0&&(Ye.attr("src",Ye.attr("src")+"?autoplay=1"),De=!1),"undefined"===Fe||Oe.hasClass("cb-audio-overlay")||Oe.css({top:Fe,height:ze,width:Ue,"margin-left":Ee}),s.resize(function(){i=s.width(),c=s.height()+1,o.length&&(o.css("height",""),V.css("height",""),i>767&&(H=N.outerHeight()),o.css("height",H),V.add(ge).css("height",O.outerHeight())),767>i&&f.css("height","auto"),re.length>0&&ve===!1&&(Se=te.offset().top,be=c-Se-90,oe.css("height",c),te.css("height",be)),Z.length>0&&(be=Ce===!0?c-Z.offset().top:c-Z.offset().top-80,Z.css("height",be)),_e=Me.width(),ze=.9*(be-Ne),Fe=(be-ze-Ne)/2,Ue=560*ze/315,Ue>_e?(Ue=_e-20,Ee=10):Ee=(_e-Ue)/2,De===!0&&(Ye.attr("src",Ye.attr("src")+"?autoplay=1"),De=!1),"undefined"===Fe||Oe.hasClass("cb-audio-overlay")||Oe.css({top:Fe,height:ze,width:Ue,"margin-left":Ee}),I.each(function(){var t=e(this)
t.hasClass("cb-module-fw")||t.hasClass("cb-full-slider")?t.find(".slides > li").css("height",t.width()/2.3076923):t.hasClass("cb-slider-widget")?t.find(".slides > li").css("height",t.width()/1.6):t.find(".slides > li").css("height",t.width()/1.876923)}),fe.length&&fe.flexslider(1),he.length&&he.flexslider(1)}),K.length){var Ae=e(".cb-criteria-score.cb-average-score"),Le=K.find(".cb-criteria"),Qe=Le.attr("data-cb-text"),Ve=K.find(".cb-overlay"),We,Be,Ge,Xe
Ve.length?(We=Ve.find("span"),Be=K.not(".cb-voted").find(".cb-overlay"),Ge=We[0].style.width):(Ve=K.find(".cb-overlay-stars"),Xe=Be=K.not(".cb-voted").find(".cb-overlay-stars"),We=Ve.find("span"),Ge=We[0].style.width,"125px"!==Ge&&We.addClass("cb-zero-stars-trigger"))
var qe=Ae.text(),Re=Le.html()
Be.on("mousemove click mouseleave mouseenter",function(t){var s=e(this).parent().offset(),a=e(this).offset(),i,c,l=K.width()/100,r=Ve.width()/100
return K.hasClass("stars")?Math.round(a.left)<=t.pageX&&(c=Math.round((t.pageX-Math.round(a.left))/r),i=(Math.round(10*c/20)/10).toFixed(1),0>i&&(i=0),i>5&&(i=5),q=E===!0?c:100-c):(c=Math.ceil((t.pageX-s.left)/l),q=E===!0?100-c:c),K.hasClass("points")?(i=E===!0?((100-c)/10).toFixed(1):(c/10).toFixed(1),Ae.text(i)):K.hasClass("percentage")&&(i=E===!0?100-c+"%":c+"%",Ae.text(i)),We.hasClass("cb-bar-ani")&&We.removeClass("cb-bar-ani"),We.hasClass("cb-bar-ani-stars")&&We.removeClass("cb-bar-ani-stars").css("width",100-c+"%"),q>100&&(q=100),1>q&&(q=0),We.css("width",q+"%"),"mouseenter"==t.type&&Le.fadeOut(75,function(){e(this).fadeIn(75).text(Qe)}),"mouseleave"==t.type&&(We.animate({width:Ge},300),Ae.text(qe),Le.fadeOut(75,function(){e(this).fadeIn(75).html(Re)})),"click"==t.type?(me=K.attr("data-cb-nonce"),K.hasClass("points")&&(i=10*i),K.hasClass("stars")&&(i=20*i),s=e(this).parent().offset(),Ve.off("mousemove click mouseleave mouseenter"),e.ajax({type:"POST",data:{action:"cb_a_s",cburNonce:me,cbNewScore:parseInt(i),cbPostID:cbScripts.cbPostID},url:cbScripts.cbUrl,dataType:"json",success:function(t){var s=t[0],a=t[2]
Le.fadeOut(550,function(){e(this).fadeIn(550).html(Re).find(".cb-votes-count").html(a)}),"-1"!==s&&"null"!==s&&(K.hasClass("points")?Ae.html((s/10).toFixed(1)):K.hasClass("percentage")?Ae.html(s+"%"):s=100-s,We.css("width",s+"%"),K.addClass("cb-voted cb-tip-bot").off("click")),K.tipper({direction:"bottom"}),cookie.enabled()&&cookie.set({cb_user_rating:"1"},{expires:28})},error:function(e,t,s){console.log("cbur "+e+" :: "+t+" :: "+s)}}),!1):void 0})}var Je=jQuery("#cb-yt-player")
function Ke(){ve===!1&&Je.length>0&&cbYTPlayerHolder.playVideo()}function Ze(){ve===!1&&Je.length>0&&cbYTPlayerHolder.pauseVideo()}}(jQuery)
var cbYTPlayerHolder,CbYTPlayer=jQuery("#cb-yt-player"),cbYouTubeVideoID=CbYTPlayer.text()
if(CbYTPlayer.length>0){var tag=document.createElement("script")
tag.src="//www.youtube.com/iframe_api"
var firstScriptTag=document.getElementsByTagName("script")[0]
firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}function onYouTubeIframeAPIReady(){CbYTPlayer.length>0&&(cbYTPlayerHolder=new YT.Player("cb-yt-player",{videoId:cbYouTubeVideoID}))}